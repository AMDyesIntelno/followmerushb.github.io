[https://github.com/Z3Prover/z3](https://github.com/Z3Prover/z3)

安装

`pip install z3-solver`

常用数据类型

`Int`:整数(数学意义上)

`Bool`:布尔型

`Array`:数组

`BitVec('x',n)`:n位整型,例如:`char`类型可被设置为`Bitvec('x',8)`

常用API

`Solver()`:创建一个通用求解器,创建后我们可以添加我们的约束条件,进行下一步的求解

`add()`:添加约束条件,通常在`solver()`命令之后,添加的约束条件通常是一个逻辑等式

`check()`:通常用来判断在添加完约束条件后,来检测解的情况,有解的时候会回显`sat`,无解的时候会回显`unsat`

`model()`:在存在解的时候,该函数会将每个限制条件所对应的解集取交集,进而得出正解

使用例子(RCTF-2015 notsequence)(题目没出好,存在多解的情况,但只有杨辉三角才能过)

```py
from z3 import *
v0=Int('v0')
v1=Int('v1')
v2=Int('v2')
v3=Int('v3')
v4=Int('v4')
v5=Int('v5')
v6=Int('v6')
v7=Int('v7')
v8=Int('v8')
v9=Int('v9')
v10=Int('v10')
v11=Int('v11')
v12=Int('v12')
v13=Int('v13')
v14=Int('v14')
v15=Int('v15')
v16=Int('v16')
v17=Int('v17')
v18=Int('v18')
v19=Int('v19')
v20=Int('v20')
v21=Int('v21')
v22=Int('v22')
v23=Int('v23')
v24=Int('v24')
v25=Int('v25')
v26=Int('v26')
v27=Int('v27')
v28=Int('v28')
v29=Int('v29')
v30=Int('v30')
v31=Int('v31')
v32=Int('v32')
v33=Int('v33')
v34=Int('v34')
v35=Int('v35')
v36=Int('v36')
v37=Int('v37')
v38=Int('v38')
v39=Int('v39')
v40=Int('v40')
v41=Int('v41')
v42=Int('v42')
v43=Int('v43')
v44=Int('v44')
v45=Int('v45')
v46=Int('v46')
v47=Int('v47')
v48=Int('v48')
v49=Int('v49')
v50=Int('v50')
v51=Int('v51')
v52=Int('v52')
v53=Int('v53')
v54=Int('v54')
v55=Int('v55')
v56=Int('v56')
v57=Int('v57')
v58=Int('v58')
v59=Int('v59')
v60=Int('v60')
v61=Int('v61')
v62=Int('v62')
v63=Int('v63')
v64=Int('v64')
v65=Int('v65')
v66=Int('v66')
v67=Int('v67')
v68=Int('v68')
v69=Int('v69')
v70=Int('v70')
v71=Int('v71')
v72=Int('v72')
v73=Int('v73')
v74=Int('v74')
v75=Int('v75')
v76=Int('v76')
v77=Int('v77')
v78=Int('v78')
v79=Int('v79')
v80=Int('v80')
v81=Int('v81')
v82=Int('v82')
v83=Int('v83')
v84=Int('v84')
v85=Int('v85')
v86=Int('v86')
v87=Int('v87')
v88=Int('v88')
v89=Int('v89')
v90=Int('v90')
v91=Int('v91')
v92=Int('v92')
v93=Int('v93')
v94=Int('v94')
v95=Int('v95')
v96=Int('v96')
v97=Int('v97')
v98=Int('v98')
v99=Int('v99')
v100=Int('v100')
v101=Int('v101')
v102=Int('v102')
v103=Int('v103')
v104=Int('v104')
v105=Int('v105')
v106=Int('v106')
v107=Int('v107')
v108=Int('v108')
v109=Int('v109')
v110=Int('v110')
v111=Int('v111')
v112=Int('v112')
v113=Int('v113')
v114=Int('v114')
v115=Int('v115')
v116=Int('v116')
v117=Int('v117')
v118=Int('v118')
v119=Int('v119')
v120=Int('v120')
v121=Int('v121')
v122=Int('v122')
v123=Int('v123')
v124=Int('v124')
v125=Int('v125')
v126=Int('v126')
v127=Int('v127')
v128=Int('v128')
v129=Int('v129')
v130=Int('v130')
v131=Int('v131')
v132=Int('v132')
v133=Int('v133')
v134=Int('v134')
v135=Int('v135')
v136=Int('v136')
v137=Int('v137')
v138=Int('v138')
v139=Int('v139')
v140=Int('v140')
v141=Int('v141')
v142=Int('v142')
v143=Int('v143')
v144=Int('v144')
v145=Int('v145')
v146=Int('v146')
v147=Int('v147')
v148=Int('v148')
v149=Int('v149')
v150=Int('v150')
v151=Int('v151')
v152=Int('v152')
v153=Int('v153')
v154=Int('v154')
v155=Int('v155')
v156=Int('v156')
v157=Int('v157')
v158=Int('v158')
v159=Int('v159')
v160=Int('v160')
v161=Int('v161')
v162=Int('v162')
v163=Int('v163')
v164=Int('v164')
v165=Int('v165')
v166=Int('v166')
v167=Int('v167')
v168=Int('v168')
v169=Int('v169')
v170=Int('v170')
v171=Int('v171')
v172=Int('v172')
v173=Int('v173')
v174=Int('v174')
v175=Int('v175')
v176=Int('v176')
v177=Int('v177')
v178=Int('v178')
v179=Int('v179')
v180=Int('v180')
v181=Int('v181')
v182=Int('v182')
v183=Int('v183')
v184=Int('v184')
v185=Int('v185')
v186=Int('v186')
v187=Int('v187')
v188=Int('v188')
v189=Int('v189')
v190=Int('v190')
v191=Int('v191')
v192=Int('v192')
v193=Int('v193')
v194=Int('v194')
v195=Int('v195')
v196=Int('v196')
v197=Int('v197')
v198=Int('v198')
v199=Int('v199')
v200=Int('v200')
v201=Int('v201')
v202=Int('v202')
v203=Int('v203')
v204=Int('v204')
v205=Int('v205')
v206=Int('v206')
v207=Int('v207')
v208=Int('v208')
v209=Int('v209')

s=Solver()#创建一个通用求解器

s.add(v0==1)#添加约束条件
s.add(v1+v2==2)
s.add(v3+v4+v5==4)
s.add(v6+v7+v8+v9==8)
s.add(v10+v11+v12+v13+v14==16)
s.add(v15+v16+v17+v18+v19+v20==32)
s.add(v21+v22+v23+v24+v25+v26+v27==64)
s.add(v28+v29+v30+v31+v32+v33+v34+v35==128)
s.add(v36+v37+v38+v39+v40+v41+v42+v43+v44==256)
s.add(v45+v46+v47+v48+v49+v50+v51+v52+v53+v54==512)
s.add(v55+v56+v57+v58+v59+v60+v61+v62+v63+v64+v65==1024)
s.add(v66+v67+v68+v69+v70+v71+v72+v73+v74+v75+v76+v77==2048)
s.add(v78+v79+v80+v81+v82+v83+v84+v85+v86+v87+v88+v89+v90==4096)
s.add(v91+v92+v93+v94+v95+v96+v97+v98+v99+v100+v101+v102+v103+v104==8192)
s.add(v105+v106+v107+v108+v109+v110+v111+v112+v113+v114+v115+v116+v117+v118+v119==16384)
s.add(v120+v121+v122+v123+v124+v125+v126+v127+v128+v129+v130+v131+v132+v133+v134+v135==32768)
s.add(v136+v137+v138+v139+v140+v141+v142+v143+v144+v145+v146+v147+v148+v149+v150+v151+v152==65536)
s.add(v153+v154+v155+v156+v157+v158+v159+v160+v161+v162+v163+v164+v165+v166+v167+v168+v169+v170==131072)
s.add(v171+v172+v173+v174+v175+v176+v177+v178+v179+v180+v181+v182+v183+v184+v185+v186+v187+v188+v189==262144)
s.add(v190+v191+v192+v193+v194+v195+v196+v197+v198+v199+v200+v201+v202+v203+v204+v205+v206+v207+v208+v209==524288)
s.add(v0+v1+v3+v6+v10+v15+v21+v28+v36+v45+v55+v66+v78+v91+v105+v120+v136+v153+v171==v191)
s.add(v2+v4+v7+v11+v16+v22+v29+v37+v46+v56+v67+v79+v92+v106+v121+v137+v154+v172==v192)
s.add(v5+v8+v12+v17+v23+v30+v38+v47+v57+v68+v80+v93+v107+v122+v138+v155+v173==v193)   
s.add(v9+v13+v18+v24+v31+v39+v48+v58+v69+v81+v94+v108+v123+v139+v156+v174==v194)      
s.add(v14+v19+v25+v32+v40+v49+v59+v70+v82+v95+v109+v124+v140+v157+v175==v195)
s.add(v20+v26+v33+v41+v50+v60+v71+v83+v96+v110+v125+v141+v158+v176==v196)
s.add(v27+v34+v42+v51+v61+v72+v84+v97+v111+v126+v142+v159+v177==v197)
s.add(v35+v43+v52+v62+v73+v85+v98+v112+v127+v143+v160+v178==v198)
s.add(v44+v53+v63+v74+v86+v99+v113+v128+v144+v161+v179==v199)
s.add(v54+v64+v75+v87+v100+v114+v129+v145+v162+v180==v200)
s.add(v65+v76+v88+v101+v115+v130+v146+v163+v181==v201)
s.add(v77+v89+v102+v116+v131+v147+v164+v182==v202)
s.add(v90+v103+v117+v132+v148+v165+v183==v203)
s.add(v104+v118+v133+v149+v166+v184==v204)
s.add(v119+v134+v150+v167+v185==v205)
s.add(v135+v151+v168+v186==v206)
s.add(v152+v169+v187==v207)
s.add(v170+v188==v208)
s.add(v189==v209)
s.add(v0>0)
s.add(v1>0)
s.add(v2>0)
s.add(v3>0)
s.add(v4>0)
s.add(v5>0)
s.add(v6>0)
s.add(v7>0)
s.add(v8>0)
s.add(v9>0)
s.add(v10>0)
s.add(v11>0)
s.add(v12>0)
s.add(v13>0)
s.add(v14>0)
s.add(v15>0)
s.add(v16>0)
s.add(v17>0)
s.add(v18>0)
s.add(v19>0)
s.add(v20>0)
s.add(v21>0)
s.add(v22>0)
s.add(v23>0)
s.add(v24>0)
s.add(v25>0)
s.add(v26>0)
s.add(v27>0)
s.add(v28>0)
s.add(v29>0)
s.add(v30>0)
s.add(v31>0)
s.add(v32>0)
s.add(v33>0)
s.add(v34>0)
s.add(v35>0)
s.add(v36>0)
s.add(v37>0)
s.add(v38>0)
s.add(v39>0)
s.add(v40>0)
s.add(v41>0)
s.add(v42>0)
s.add(v43>0)
s.add(v44>0)
s.add(v45>0)
s.add(v46>0)
s.add(v47>0)
s.add(v48>0)
s.add(v49>0)
s.add(v50>0)
s.add(v51>0)
s.add(v52>0)
s.add(v53>0)
s.add(v54>0)
s.add(v55>0)
s.add(v56>0)
s.add(v57>0)
s.add(v58>0)
s.add(v59>0)
s.add(v60>0)
s.add(v61>0)
s.add(v62>0)
s.add(v63>0)
s.add(v64>0)
s.add(v65>0)
s.add(v66>0)
s.add(v67>0)
s.add(v68>0)
s.add(v69>0)
s.add(v70>0)
s.add(v71>0)
s.add(v72>0)
s.add(v73>0)
s.add(v74>0)
s.add(v75>0)
s.add(v76>0)
s.add(v77>0)
s.add(v78>0)
s.add(v79>0)
s.add(v80>0)
s.add(v81>0)
s.add(v82>0)
s.add(v83>0)
s.add(v84>0)
s.add(v85>0)
s.add(v86>0)
s.add(v87>0)
s.add(v88>0)
s.add(v89>0)
s.add(v90>0)
s.add(v91>0)
s.add(v92>0)
s.add(v93>0)
s.add(v94>0)
s.add(v95>0)
s.add(v96>0)
s.add(v97>0)
s.add(v98>0)
s.add(v99>0)
s.add(v100>0)
s.add(v101>0)
s.add(v102>0)
s.add(v103>0)
s.add(v104>0)
s.add(v105>0)
s.add(v106>0)
s.add(v107>0)
s.add(v108>0)
s.add(v109>0)
s.add(v110>0)
s.add(v111>0)
s.add(v112>0)
s.add(v113>0)
s.add(v114>0)
s.add(v115>0)
s.add(v116>0)
s.add(v117>0)
s.add(v118>0)
s.add(v119>0)
s.add(v120>0)
s.add(v121>0)
s.add(v122>0)
s.add(v123>0)
s.add(v124>0)
s.add(v125>0)
s.add(v126>0)
s.add(v127>0)
s.add(v128>0)
s.add(v129>0)
s.add(v130>0)
s.add(v131>0)
s.add(v132>0)
s.add(v133>0)
s.add(v134>0)
s.add(v135>0)
s.add(v136>0)
s.add(v137>0)
s.add(v138>0)
s.add(v139>0)
s.add(v140>0)
s.add(v141>0)
s.add(v142>0)
s.add(v143>0)
s.add(v144>0)
s.add(v145>0)
s.add(v146>0)
s.add(v147>0)
s.add(v148>0)
s.add(v149>0)
s.add(v150>0)
s.add(v151>0)
s.add(v152>0)
s.add(v153>0)
s.add(v154>0)
s.add(v155>0)
s.add(v156>0)
s.add(v157>0)
s.add(v158>0)
s.add(v159>0)
s.add(v160>0)
s.add(v161>0)
s.add(v162>0)
s.add(v163>0)
s.add(v164>0)
s.add(v165>0)
s.add(v166>0)
s.add(v167>0)
s.add(v168>0)
s.add(v169>0)
s.add(v170>0)
s.add(v171>0)
s.add(v172>0)
s.add(v173>0)
s.add(v174>0)
s.add(v175>0)
s.add(v176>0)
s.add(v177>0)
s.add(v178>0)
s.add(v179>0)
s.add(v180>0)
s.add(v181>0)
s.add(v182>0)
s.add(v183>0)
s.add(v184>0)
s.add(v185>0)
s.add(v186>0)
s.add(v187>0)
s.add(v188>0)
s.add(v189>0)
s.add(v190>0)
s.add(v191>0)
s.add(v192>0)
s.add(v193>0)
s.add(v194>0)
s.add(v195>0)
s.add(v196>0)
s.add(v197>0)
s.add(v198>0)
s.add(v199>0)
s.add(v200>0)
s.add(v201>0)
s.add(v202>0)
s.add(v203>0)
s.add(v204>0)
s.add(v205>0)
s.add(v206>0)
s.add(v207>0)
s.add(v208>0)
s.add(v209>0)

print(s.check())#检查是否有解,sat结果表示找到某个合适的解,unsat结果表示没有解

m=s.model()#得到一组解,m为字典类型
#print(m)

#for d in m.decls():
#    print("%s = %s" % (d.name(), m[d]))

t=[v0,v1,v2,v3,v4,v5,v6,v7,v8,v9,v10,v11,v12,v13,v14,v15,v16,v17,v18,v19,v20,v21,v22,v23,v24,v25,v26,v27,v28,v29,v30,v31,v32,v33,v34,v35,v36,v37,v38,v39,v40,v41,v42,v43,v44,v45,v46,v47,v48,v49,v50,v51,v52,v53,v54,v55,v56,v57,v58,v59,v60,v61,v62,v63,v64,v65,v66,v67,v68,v69,v70,v71,v72,v73,v74,v75,v76,v77,v78,v79,v80,v81,v82,v83,v84,v85,v86,v87,v88,v89,v90,v91,v92,v93,v94,v95,v96,v97,v98,v99,v100,v101,v102,v103,v104,v105,v106,v107,v108,v109,v110,v111,v112,v113,v114,v115,v116,v117,v118,v119,v120,v121,v122,v123,v124,v125,v126,v127,v128,v129,v130,v131,v132,v133,v134,v135,v136,v137,v138,v139,v140,v141,v142,v143,v144,v145,v146,v147,v148,v149,v150,v151,v152,v153,v154,v155,v156,v157,v158,v159,v160,v161,v162,v163,v164,v165,v166,v167,v168,v169,v170,v171,v172,v173,v174,v175,v176,v177,v178,v179,v180,v181,v182,v183,v184,v185,v186,v187,v188,v189,v190,v191,v192,v193,v194,v195,v196,v197,v198,v199,v200,v201,v202,v203,v204,v205,v206,v207,v208,v209]

for i in t:
    print(m[i])
```